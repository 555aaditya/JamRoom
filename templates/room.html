<!DOCTYPE html>
<html lang="en">
  <head>
    <title>JamRoom - {{ room.name }}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/room.css') }}"
    />
    <link
      rel="icon"
      href="{{ url_for('static', filename='Jam-Room.svg') }}"
      type="image/x-icon"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
  </head>
  <body class="dark-theme">
    <header class="main-header">
      <div class="logo-container">
        <img
          src="{{ url_for('static', filename='Jam-Room.png') }}"
          alt="JamRoom Logo"
          class="logo"
        />
      </div>
      <div class="profile-container">
        <img
          src="{{ url_for('static', filename='account.png') }}"
          alt="User Profile"
          class="profile-pic"
        />
      </div>
    </header>

    <main class="room-layout">
      <section id="main-player-section" class="player-controls-container">
        <h1>Welcome to {{ room.name }}</h1>
        <p>Room Key: {{ room.room_key }}</p>
        <p>Listeners: <span id="listener-count">{{ room.listeners }}</span></p>

        <div class="music-player-placeholder">
          <p>Music Player will go here</p>
          <p>Current Track: [No track playing]</p>
          <div class="player-controls">
            <button>⏮️</button>
            <button>▶️</button>
            <button>⏭️</button>
          </div>
        </div>

        <form action="/home">
          <button type="submit" class="back-home-btn">Back to Home</button>
        </form>

        <button id="leave-room-button" class="leave-room-btn">
          Leave Room
        </button>
      </section>

      <section id="chat-section" class="chat-container">
        <h2>Chat</h2>
        <div class="messages-container" id="messages-container"></div>
        <form id="message-form" class="message-input-form">
          <input
            type="text"
            id="message-input"
            placeholder="Type a message..."
            class="chat-input"
          />
          <button type="submit" class="send-btn">Send</button>
        </form>
      </section>
    </main>

    <script>
      const CURRENT_USER = "{{ session.get('user') }}";
      const ROOM_KEY = "{{ room.room_key }}";
    </script>
    <script src="{{ url_for('static', filename='scripts/room.js') }}"></script>
  </body>
</html>